

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Estimators &mdash; formative  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Refutations" href="refutations.html" />
    <link rel="prev" title="Estimands: ATE, ATT, and LATE" href="estimands.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            formative
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dag.html">DAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="estimands.html">Estimands: ATE, ATT, and LATE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Estimators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#olsobservational">OLSObservational</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.OLSObservational"><code class="docutils literal notranslate"><span class="pre">OLSObservational</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSObservational.fit"><code class="docutils literal notranslate"><span class="pre">OLSObservational.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#olsresult">OLSResult</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.OLSResult"><code class="docutils literal notranslate"><span class="pre">OLSResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.effect"><code class="docutils literal notranslate"><span class="pre">OLSResult.effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.unadjusted_effect"><code class="docutils literal notranslate"><span class="pre">OLSResult.unadjusted_effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.std_err"><code class="docutils literal notranslate"><span class="pre">OLSResult.std_err</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.conf_int"><code class="docutils literal notranslate"><span class="pre">OLSResult.conf_int</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.pvalue"><code class="docutils literal notranslate"><span class="pre">OLSResult.pvalue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.adjustment_set"><code class="docutils literal notranslate"><span class="pre">OLSResult.adjustment_set</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.statsmodels_result"><code class="docutils literal notranslate"><span class="pre">OLSResult.statsmodels_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.statsmodels_unadjusted_result"><code class="docutils literal notranslate"><span class="pre">OLSResult.statsmodels_unadjusted_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.assumptions"><code class="docutils literal notranslate"><span class="pre">OLSResult.assumptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.executive_summary"><code class="docutils literal notranslate"><span class="pre">OLSResult.executive_summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.summary"><code class="docutils literal notranslate"><span class="pre">OLSResult.summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.OLSResult.refute"><code class="docutils literal notranslate"><span class="pre">OLSResult.refute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iv2sls">IV2SLS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.IV2SLS"><code class="docutils literal notranslate"><span class="pre">IV2SLS</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.IV2SLS.fit"><code class="docutils literal notranslate"><span class="pre">IV2SLS.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ivresult">IVResult</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.IVResult"><code class="docutils literal notranslate"><span class="pre">IVResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.effect"><code class="docutils literal notranslate"><span class="pre">IVResult.effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.unadjusted_effect"><code class="docutils literal notranslate"><span class="pre">IVResult.unadjusted_effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.std_err"><code class="docutils literal notranslate"><span class="pre">IVResult.std_err</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.conf_int"><code class="docutils literal notranslate"><span class="pre">IVResult.conf_int</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.pvalue"><code class="docutils literal notranslate"><span class="pre">IVResult.pvalue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.adjustment_set"><code class="docutils literal notranslate"><span class="pre">IVResult.adjustment_set</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.statsmodels_result"><code class="docutils literal notranslate"><span class="pre">IVResult.statsmodels_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.statsmodels_unadjusted_result"><code class="docutils literal notranslate"><span class="pre">IVResult.statsmodels_unadjusted_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.assumptions"><code class="docutils literal notranslate"><span class="pre">IVResult.assumptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.executive_summary"><code class="docutils literal notranslate"><span class="pre">IVResult.executive_summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.refute"><code class="docutils literal notranslate"><span class="pre">IVResult.refute()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.IVResult.summary"><code class="docutils literal notranslate"><span class="pre">IVResult.summary()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#propensityscorematching">PropensityScoreMatching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.PropensityScoreMatching"><code class="docutils literal notranslate"><span class="pre">PropensityScoreMatching</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.PropensityScoreMatching.fit"><code class="docutils literal notranslate"><span class="pre">PropensityScoreMatching.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#matchingresult">MatchingResult</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.MatchingResult"><code class="docutils literal notranslate"><span class="pre">MatchingResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.effect"><code class="docutils literal notranslate"><span class="pre">MatchingResult.effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.unadjusted_effect"><code class="docutils literal notranslate"><span class="pre">MatchingResult.unadjusted_effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.std_err"><code class="docutils literal notranslate"><span class="pre">MatchingResult.std_err</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.conf_int"><code class="docutils literal notranslate"><span class="pre">MatchingResult.conf_int</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.pvalue"><code class="docutils literal notranslate"><span class="pre">MatchingResult.pvalue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.adjustment_set"><code class="docutils literal notranslate"><span class="pre">MatchingResult.adjustment_set</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.bootstrap_atts"><code class="docutils literal notranslate"><span class="pre">MatchingResult.bootstrap_atts</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.assumptions"><code class="docutils literal notranslate"><span class="pre">MatchingResult.assumptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.executive_summary"><code class="docutils literal notranslate"><span class="pre">MatchingResult.executive_summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.summary"><code class="docutils literal notranslate"><span class="pre">MatchingResult.summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.MatchingResult.refute"><code class="docutils literal notranslate"><span class="pre">MatchingResult.refute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rct">RCT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.RCT"><code class="docutils literal notranslate"><span class="pre">RCT</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCT.fit"><code class="docutils literal notranslate"><span class="pre">RCT.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rctresult">RCTResult</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.RCTResult"><code class="docutils literal notranslate"><span class="pre">RCTResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.effect"><code class="docutils literal notranslate"><span class="pre">RCTResult.effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.std_err"><code class="docutils literal notranslate"><span class="pre">RCTResult.std_err</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.conf_int"><code class="docutils literal notranslate"><span class="pre">RCTResult.conf_int</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.pvalue"><code class="docutils literal notranslate"><span class="pre">RCTResult.pvalue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.statsmodels_result"><code class="docutils literal notranslate"><span class="pre">RCTResult.statsmodels_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.assumptions"><code class="docutils literal notranslate"><span class="pre">RCTResult.assumptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.executive_summary"><code class="docutils literal notranslate"><span class="pre">RCTResult.executive_summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.summary"><code class="docutils literal notranslate"><span class="pre">RCTResult.summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.RCTResult.refute"><code class="docutils literal notranslate"><span class="pre">RCTResult.refute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#did">DiD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.DiD"><code class="docutils literal notranslate"><span class="pre">DiD</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiD.fit"><code class="docutils literal notranslate"><span class="pre">DiD.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#didresult">DiDResult</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formative.DiDResult"><code class="docutils literal notranslate"><span class="pre">DiDResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.effect"><code class="docutils literal notranslate"><span class="pre">DiDResult.effect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.naive_diff"><code class="docutils literal notranslate"><span class="pre">DiDResult.naive_diff</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.std_err"><code class="docutils literal notranslate"><span class="pre">DiDResult.std_err</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.conf_int"><code class="docutils literal notranslate"><span class="pre">DiDResult.conf_int</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.pvalue"><code class="docutils literal notranslate"><span class="pre">DiDResult.pvalue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.statsmodels_result"><code class="docutils literal notranslate"><span class="pre">DiDResult.statsmodels_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.assumptions"><code class="docutils literal notranslate"><span class="pre">DiDResult.assumptions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.executive_summary"><code class="docutils literal notranslate"><span class="pre">DiDResult.executive_summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.summary"><code class="docutils literal notranslate"><span class="pre">DiDResult.summary()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formative.DiDResult.refute"><code class="docutils literal notranslate"><span class="pre">DiDResult.refute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="refutations.html">Refutations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">formative</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Estimators</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/estimators.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="estimators">
<h1>Estimators<a class="headerlink" href="#estimators" title="Link to this heading"></a></h1>
<section id="olsobservational">
<h2>OLSObservational<a class="headerlink" href="#olsobservational" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.OLSObservational">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">OLSObservational</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSObservational" title="Link to this definition"></a></dt>
<dd><p>Observational OLS estimator with DAG-based confounder identification.</p>
<p>Given a DAG encoding your causal assumptions, this estimator:</p>
<ol class="arabic simple">
<li><p>Identifies which variables must be controlled for (the adjustment set)
using the backdoor criterion — any variable that is an ancestor of both
treatment and outcome, but not a descendant of treatment.</p></li>
<li><p>Raises an error if unobserved confounders make OLS invalid.</p></li>
<li><p>Estimates the causal effect via OLS, controlling for the adjustment set.</p></li>
<li><p>Also runs unadjusted OLS so you can see the confounding bias directly.</p></li>
</ol>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;ability&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="s2">&quot;income&quot;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;income&quot;</span><span class="p">)</span>

<span class="c1"># If &#39;ability&#39; is in df, it is controlled for automatically.</span>
<span class="c1"># If &#39;ability&#39; is not in df, an IdentificationError is raised.</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">OLSObservational</span><span class="p">(</span><span class="n">dag</span><span class="p">,</span> <span class="n">treatment</span><span class="o">=</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="s2">&quot;income&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dag</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="dag.html#formative.DAG" title="formative.dag.DAG"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAG</span></code></a></span>)</p></li>
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="formative.OLSObservational.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSObservational.fit" title="Link to this definition"></a></dt>
<dd><p>Identify the adjustment set, then estimate the causal effect via OLS.</p>
<p>Runs both an adjusted model (controlling for confounders) and an
unadjusted model (treatment only) so you can see the confounding bias.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – Must contain columns for treatment, outcome, and any confounders
that appear in the DAG. Column names must match the node names in
the DAG. DAG nodes absent from the dataframe are treated as
unobserved — if any of these are confounders, an <code class="docutils literal notranslate"><span class="pre">IdentificationError</span></code>
is raised before estimation.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IdentificationError</strong> – If confounders declared in the DAG are absent from the dataframe.
    Note: confounders not modelled in the DAG at all cannot be detected.</p></li>
<li><p><strong>ValueError</strong> – If treatment or outcome columns are missing from the dataframe.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#formative.OLSResult" title="formative.estimators.ols.OLSResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">OLSResult</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="olsresult">
<h2>OLSResult<a class="headerlink" href="#olsresult" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.OLSResult">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">OLSResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adjusted_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unadjusted_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSResult" title="Link to this definition"></a></dt>
<dd><p>The result of an OLS causal estimation.</p>
<p>Holds both the adjusted estimate (controlling for confounders) and the
unadjusted estimate (<code class="docutils literal notranslate"><span class="pre">treatment</span> <span class="pre">~</span> <span class="pre">outcome</span></code> only), so you can see the
effect of controlling for confounders directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>adjustment_set</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.OLSResult.effect" title="Link to this definition"></a></dt>
<dd><p>causal effect of treatment on outcome.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Adjusted point estimate</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.unadjusted_effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">unadjusted_effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.OLSResult.unadjusted_effect" title="Link to this definition"></a></dt>
<dd><p>naive regression without controlling for confounders.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unadjusted point estimate</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.std_err">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">std_err</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.OLSResult.std_err" title="Link to this definition"></a></dt>
<dd><p>Standard error of the adjusted treatment effect estimate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.conf_int">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">conf_int</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.OLSResult.conf_int" title="Link to this definition"></a></dt>
<dd><p>95% confidence interval for the adjusted treatment effect.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.pvalue">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">pvalue</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.OLSResult.pvalue" title="Link to this definition"></a></dt>
<dd><p>p-value for the adjusted treatment effect (<code class="docutils literal notranslate"><span class="pre">H0:</span> <span class="pre">effect</span> <span class="pre">=</span> <span class="pre">0</span></code>).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.adjustment_set">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">adjustment_set</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.OLSResult.adjustment_set" title="Link to this definition"></a></dt>
<dd><p>Variables controlled for to satisfy the backdoor criterion.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.statsmodels_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_result</span></span><a class="headerlink" href="#formative.OLSResult.statsmodels_result" title="Link to this definition"></a></dt>
<dd><p>The underlying adjusted statsmodels result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.statsmodels_unadjusted_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_unadjusted_result</span></span><a class="headerlink" href="#formative.OLSResult.statsmodels_unadjusted_result" title="Link to this definition"></a></dt>
<dd><p>The underlying unadjusted statsmodels result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.OLSResult.assumptions">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">assumptions</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="refutations.html#formative.Assumption" title="formative.refutations._check.Assumption"><span class="pre">Assumption</span></a><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.OLSResult.assumptions" title="Link to this definition"></a></dt>
<dd><p>Modelling assumptions required for a causal interpretation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.OLSResult.executive_summary">
<span class="sig-name descname"><span class="pre">executive_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSResult.executive_summary" title="Link to this definition"></a></dt>
<dd><p>Narrative explanation of the method, DAG, assumptions, and result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.OLSResult.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSResult.summary" title="Link to this definition"></a></dt>
<dd><p>Concise tabular summary of the ATE estimate, confidence interval, and assumptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.OLSResult.refute">
<span class="sig-name descname"><span class="pre">refute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.OLSResult.refute" title="Link to this definition"></a></dt>
<dd><p>Run refutation checks against this OLS estimation.</p>
<p>Currently runs:</p>
<ul class="simple">
<li><p><strong>Random common cause</strong>: adds a random noise column as an extra
control and checks that the estimate does not shift by more than
one standard error.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – The same dataframe passed to <code class="docutils literal notranslate"><span class="pre">fit()</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="iv2sls">
<h2>IV2SLS<a class="headerlink" href="#iv2sls" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.IV2SLS">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">IV2SLS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.IV2SLS" title="Link to this definition"></a></dt>
<dd><p>Instrumental Variables estimator using Two-Stage Least Squares (2SLS).</p>
<p>Uses the DAG to validate the instrument structurally and identify
observed confounders to include as controls in both stages:</p>
<ol class="arabic simple">
<li><p><strong>Relevance</strong> (structural): the instrument must have a directed path
to the treatment in the DAG.</p></li>
<li><p><strong>Exclusion restriction</strong> (structural): no directed path from the
instrument to the outcome that bypasses the treatment.</p></li>
<li><p><strong>Observed confounders</strong> (backdoor criterion): any variable that is
a common cause of treatment and outcome and is present in the data
is included as a control. Unobserved confounders are handled by the
instrument and do <strong>not</strong> raise an <code class="docutils literal notranslate"><span class="pre">IdentificationError</span></code> — this is
the primary use case for IV estimation.</p></li>
</ol>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;proximity&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;ability&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="s2">&quot;income&quot;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;income&quot;</span><span class="p">)</span>

<span class="c1"># &#39;ability&#39; is absent from df (unobserved) — the instrument &quot;controls&quot; for it.</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span>
    <span class="n">dag</span><span class="p">,</span> <span class="n">treatment</span><span class="o">=</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="s2">&quot;income&quot;</span><span class="p">,</span> <span class="n">instrument</span><span class="o">=</span><span class="s2">&quot;proximity&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dag</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="dag.html#formative.DAG" title="formative.dag.DAG"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAG</span></code></a></span>)</p></li>
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>instrument</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="formative.IV2SLS.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.IV2SLS.fit" title="Link to this definition"></a></dt>
<dd><p>Validate data and estimate the causal effect via 2SLS.</p>
<p>Observed confounders from the DAG are included as controls in both
stages. Unobserved confounders are handled by the instrument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – Must contain columns for treatment, outcome, and instrument.
Observed confounders present in the DAG are added as controls
automatically if they appear in the dataframe.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If treatment, outcome, or instrument columns are missing from
    the dataframe.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#formative.IVResult" title="formative.estimators.iv.IVResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">IVResult</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="ivresult">
<h2>IVResult<a class="headerlink" href="#ivresult" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.IVResult">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">IVResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unadjusted_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.IVResult" title="Link to this definition"></a></dt>
<dd><p>The result of an IV (2SLS) causal estimation.</p>
<p>Holds both the instrumented (2SLS) estimate and the unadjusted OLS
estimate (<code class="docutils literal notranslate"><span class="pre">outcome</span> <span class="pre">~</span> <span class="pre">treatment</span></code> only), so you can see the confounding
bias that IV corrects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>instrument</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>adjustment_set</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.IVResult.effect" title="Link to this definition"></a></dt>
<dd><p>2SLS point estimate of the causal effect of treatment on outcome.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.unadjusted_effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">unadjusted_effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.IVResult.unadjusted_effect" title="Link to this definition"></a></dt>
<dd><p>naive regression without instrument or controls.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unadjusted OLS estimate</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.std_err">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">std_err</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.IVResult.std_err" title="Link to this definition"></a></dt>
<dd><p>Standard error of the 2SLS treatment effect estimate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.conf_int">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">conf_int</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.IVResult.conf_int" title="Link to this definition"></a></dt>
<dd><p>95% confidence interval for the 2SLS treatment effect.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.pvalue">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">pvalue</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.IVResult.pvalue" title="Link to this definition"></a></dt>
<dd><p>p-value for the 2SLS treatment effect (<code class="docutils literal notranslate"><span class="pre">H0:</span> <span class="pre">effect</span> <span class="pre">=</span> <span class="pre">0</span></code>).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.adjustment_set">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">adjustment_set</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.IVResult.adjustment_set" title="Link to this definition"></a></dt>
<dd><p>Observed confounders included as controls in both OLS stages.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.statsmodels_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_result</span></span><a class="headerlink" href="#formative.IVResult.statsmodels_result" title="Link to this definition"></a></dt>
<dd><p>The underlying statsmodels IV2SLS result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.statsmodels_unadjusted_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_unadjusted_result</span></span><a class="headerlink" href="#formative.IVResult.statsmodels_unadjusted_result" title="Link to this definition"></a></dt>
<dd><p>The underlying unadjusted OLS result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.IVResult.assumptions">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">assumptions</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="refutations.html#formative.Assumption" title="formative.refutations._check.Assumption"><span class="pre">Assumption</span></a><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.IVResult.assumptions" title="Link to this definition"></a></dt>
<dd><p>Modelling assumptions required for a causal interpretation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.IVResult.executive_summary">
<span class="sig-name descname"><span class="pre">executive_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.IVResult.executive_summary" title="Link to this definition"></a></dt>
<dd><p>Narrative explanation of the method, DAG, assumptions, and result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.IVResult.refute">
<span class="sig-name descname"><span class="pre">refute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.IVResult.refute" title="Link to this definition"></a></dt>
<dd><p>Run refutation checks against this IV estimation.</p>
<p>Re-uses the original data to run statistical tests that probe the
assumptions underlying the IV estimate. Returns an
<code class="docutils literal notranslate"><span class="pre">IVRefutationReport</span></code> with one <code class="docutils literal notranslate"><span class="pre">RefutationCheck</span></code> per test.</p>
<p>Currently runs:</p>
<ul class="simple">
<li><p><strong>First-stage F-statistic</strong>: tests instrument relevance.
<code class="docutils literal notranslate"><span class="pre">F</span> <span class="pre">&lt;</span> <span class="pre">10</span></code> indicates a weak instrument (Stock &amp; Yogo, 2005).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – The same dataframe passed to <code class="docutils literal notranslate"><span class="pre">fit()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.IVResult.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.IVResult.summary" title="Link to this definition"></a></dt>
<dd><p>Concise tabular summary of the LATE estimate, confidence interval, and assumptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="propensityscorematching">
<h2>PropensityScoreMatching<a class="headerlink" href="#propensityscorematching" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.PropensityScoreMatching">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">PropensityScoreMatching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.PropensityScoreMatching" title="Link to this definition"></a></dt>
<dd><p>Observational estimator using propensity score matching (1-to-1 nearest
neighbour, with replacement).</p>
<p>Uses the DAG to identify observed confounders (backdoor criterion), then:</p>
<ol class="arabic simple">
<li><p>Estimates propensity scores via logistic regression of treatment on
the adjustment set.</p></li>
<li><p>Matches each treated unit to its nearest control by propensity score.</p></li>
<li><p>Estimates the ATT as the mean outcome difference across matched pairs.</p></li>
<li><p>Computes standard errors via bootstrap over the full procedure.</p></li>
</ol>
<p>Requires <strong>binary treatment</strong> (0/1). Raises <code class="docutils literal notranslate"><span class="pre">IdentificationError</span></code> if any
DAG-declared confounders are absent from the data.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;ability&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="s2">&quot;income&quot;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;education&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;income&quot;</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">PropensityScoreMatching</span><span class="p">(</span>
    <span class="n">dag</span><span class="p">,</span> <span class="n">treatment</span><span class="o">=</span><span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="s2">&quot;income&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dag</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="dag.html#formative.DAG" title="formative.dag.DAG"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAG</span></code></a></span>)</p></li>
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="formative.PropensityScoreMatching.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.PropensityScoreMatching.fit" title="Link to this definition"></a></dt>
<dd><p>Identify confounders, match on propensity scores, and estimate the ATT.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – Must contain a binary (0/1) treatment column, an outcome column,
and any confounders declared in the DAG.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IdentificationError</strong> – If DAG-declared confounders are absent from the dataframe.</p></li>
<li><p><strong>ValueError</strong> – If treatment or outcome columns are missing, or treatment is not
    binary with both classes present.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#formative.MatchingResult" title="formative.estimators.matching.MatchingResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatchingResult</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="matchingresult">
<h2>MatchingResult<a class="headerlink" href="#matchingresult" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.MatchingResult">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">MatchingResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">att</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unadjusted_effect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap_atts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.MatchingResult" title="Link to this definition"></a></dt>
<dd><p>The result of a propensity score matching estimation.</p>
<p>Holds the ATT point estimate alongside its unadjusted counterpart (naive
mean difference), so you can see the confounding bias that matching
corrects. Standard errors and CIs are computed via bootstrap over the
full matching procedure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>att</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>)</p></li>
<li><p><strong>unadjusted_effect</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>)</p></li>
<li><p><strong>bootstrap_atts</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>)</p></li>
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>adjustment_set</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.MatchingResult.effect" title="Link to this definition"></a></dt>
<dd><p>average treatment effect on the treated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ATT</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.unadjusted_effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">unadjusted_effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.MatchingResult.unadjusted_effect" title="Link to this definition"></a></dt>
<dd><p>Naive mean difference Y|T=1 minus Y|T=0, no matching.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.std_err">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">std_err</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.MatchingResult.std_err" title="Link to this definition"></a></dt>
<dd><p>Bootstrap standard error of the ATT.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.conf_int">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">conf_int</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.MatchingResult.conf_int" title="Link to this definition"></a></dt>
<dd><p>Bootstrap percentile 95% confidence interval.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.pvalue">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">pvalue</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.MatchingResult.pvalue" title="Link to this definition"></a></dt>
<dd><p>Two-sided p-value for the ATT (<code class="docutils literal notranslate"><span class="pre">H0:</span> <span class="pre">ATT</span> <span class="pre">=</span> <span class="pre">0</span></code>), via z-test.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.adjustment_set">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">adjustment_set</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.MatchingResult.adjustment_set" title="Link to this definition"></a></dt>
<dd><p>Observed confounders used in the propensity score model.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.bootstrap_atts">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">bootstrap_atts</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></span><a class="headerlink" href="#formative.MatchingResult.bootstrap_atts" title="Link to this definition"></a></dt>
<dd><p>Full array of per-bootstrap ATT values, for diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.MatchingResult.assumptions">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">assumptions</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="refutations.html#formative.Assumption" title="formative.refutations._check.Assumption"><span class="pre">Assumption</span></a><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.MatchingResult.assumptions" title="Link to this definition"></a></dt>
<dd><p>Modelling assumptions required for a causal interpretation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.MatchingResult.executive_summary">
<span class="sig-name descname"><span class="pre">executive_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.MatchingResult.executive_summary" title="Link to this definition"></a></dt>
<dd><p>Narrative explanation of the method, DAG, assumptions, and result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.MatchingResult.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.MatchingResult.summary" title="Link to this definition"></a></dt>
<dd><p>Concise tabular summary of the ATT estimate, confidence interval, and assumptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.MatchingResult.refute">
<span class="sig-name descname"><span class="pre">refute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.MatchingResult.refute" title="Link to this definition"></a></dt>
<dd><p>Run refutation checks against this matching estimation.</p>
<p>Currently runs:</p>
<ul class="simple">
<li><p><strong>Placebo treatment</strong>: randomly permutes treatment labels and
re-runs matching. The placebo ATT should be near zero.</p></li>
<li><p><strong>Random common cause</strong>: adds a random noise covariate to the
propensity score model and checks that the ATT is stable.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – The same dataframe passed to <code class="docutils literal notranslate"><span class="pre">fit()</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="rct">
<h2>RCT<a class="headerlink" href="#rct" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.RCT">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">RCT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCT" title="Link to this definition"></a></dt>
<dd><p>Randomized Controlled Trial estimator.</p>
<p>Estimates the Average Treatment Effect (ATE) via OLS regression of
the outcome on the treatment indicator. Because treatment is randomly
assigned, no confounder adjustment is needed.</p>
<p>DAG validation enforces the RCT assumption: treatment must have no
declared causes (parents) in the DAG. Declaring a cause of treatment
would contradict random assignment and raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;treatment&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;outcome&quot;</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">RCT</span><span class="p">(</span><span class="n">dag</span><span class="p">,</span> <span class="n">treatment</span><span class="o">=</span><span class="s2">&quot;treatment&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="s2">&quot;outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dag</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="dag.html#formative.DAG" title="formative.dag.DAG"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAG</span></code></a></span>)</p></li>
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="formative.RCT.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCT.fit" title="Link to this definition"></a></dt>
<dd><p>Estimate the ATE via OLS regression of outcome on treatment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – Must contain columns for treatment and outcome. Treatment may
be binary (0/1) or continuous.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If treatment or outcome columns are missing from the dataframe.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#formative.RCTResult" title="formative.estimators.rct.RCTResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RCTResult</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="rctresult">
<h2>RCTResult<a class="headerlink" href="#rctresult" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.RCTResult">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">RCTResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treatment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCTResult" title="Link to this definition"></a></dt>
<dd><p>The result of an RCT causal estimation.</p>
<p>Estimates the Average Treatment Effect (ATE) via OLS. Because treatment
is randomly assigned, no confounder adjustment is needed and the ATE
equals the difference in mean outcomes between treatment and control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>treatment</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.RCTResult.effect" title="Link to this definition"></a></dt>
<dd><p>average treatment effect (difference in means).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ATE</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.std_err">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">std_err</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.RCTResult.std_err" title="Link to this definition"></a></dt>
<dd><p>Standard error of the ATE estimate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.conf_int">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">conf_int</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.RCTResult.conf_int" title="Link to this definition"></a></dt>
<dd><p>95% confidence interval for the ATE.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.pvalue">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">pvalue</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.RCTResult.pvalue" title="Link to this definition"></a></dt>
<dd><p>p-value for the ATE (<code class="docutils literal notranslate"><span class="pre">H0:</span> <span class="pre">ATE</span> <span class="pre">=</span> <span class="pre">0</span></code>).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.statsmodels_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_result</span></span><a class="headerlink" href="#formative.RCTResult.statsmodels_result" title="Link to this definition"></a></dt>
<dd><p>The underlying statsmodels OLS result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.RCTResult.assumptions">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">assumptions</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="refutations.html#formative.Assumption" title="formative.refutations._check.Assumption"><span class="pre">Assumption</span></a><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.RCTResult.assumptions" title="Link to this definition"></a></dt>
<dd><p>Modelling assumptions required for a causal interpretation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.RCTResult.executive_summary">
<span class="sig-name descname"><span class="pre">executive_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCTResult.executive_summary" title="Link to this definition"></a></dt>
<dd><p>Narrative explanation of the method, DAG, assumptions, and result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.RCTResult.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCTResult.summary" title="Link to this definition"></a></dt>
<dd><p>Concise tabular summary of the ATE estimate, confidence interval, and assumptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.RCTResult.refute">
<span class="sig-name descname"><span class="pre">refute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.RCTResult.refute" title="Link to this definition"></a></dt>
<dd><p>Run refutation checks against this RCT estimation.</p>
<p>Currently runs:</p>
<ul class="simple">
<li><p><strong>Random common cause</strong>: adds a random noise column as an extra
control and checks that the ATE does not shift by more than one
standard error. Under randomisation the ATE should be robust to
any additional covariate.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – The same dataframe passed to <code class="docutils literal notranslate"><span class="pre">fit()</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="did">
<h2>DiD<a class="headerlink" href="#did" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.DiD">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">DiD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiD" title="Link to this definition"></a></dt>
<dd><p>Difference-in-Differences estimator.</p>
<p>Estimates the Average Treatment Effect on the Treated (ATT) by comparing
how outcomes changed over time for the treated group versus the control
group. The key insight is that any time trend common to both groups
cancels out, isolating the treatment effect.</p>
<p>Implemented as OLS with group and time main effects plus their
interaction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outcome</span> <span class="o">~</span> <span class="n">group</span> <span class="o">+</span> <span class="n">time</span> <span class="o">+</span> <span class="n">group</span><span class="p">:</span><span class="n">time</span>
</pre></div>
</div>
<p>The coefficient on <code class="docutils literal notranslate"><span class="pre">group:time</span></code> is the DiD estimate.</p>
<p>The DAG is used to validate that group, time, and outcome are declared
nodes. It does not apply the backdoor criterion — identification in DiD
comes from the panel design, not from controlling for observed confounders.</p>
<p>Requires <strong>binary</strong> group (0 = control, 1 = treated) and time
(0 = pre-period, 1 = post-period) columns.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;outcome&quot;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">assume</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">causes</span><span class="p">(</span><span class="s2">&quot;outcome&quot;</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">DiD</span><span class="p">(</span><span class="n">dag</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="s2">&quot;outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dag</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="dag.html#formative.DAG" title="formative.dag.DAG"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAG</span></code></a></span>)</p></li>
<li><p><strong>group</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>time</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="formative.DiD.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiD.fit" title="Link to this definition"></a></dt>
<dd><p>Estimate the ATT via OLS with group and time fixed effects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – Must contain binary (0/1) group and time columns, and a
numeric outcome column.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If required columns are missing or group/time are not binary.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#formative.DiDResult" title="formative.estimators.did.DiDResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiDResult</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="didresult">
<h2>DiDResult<a class="headerlink" href="#didresult" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="formative.DiDResult">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">formative.</span></span><span class="sig-name descname"><span class="pre">DiDResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outcome</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">naive_diff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiDResult" title="Link to this definition"></a></dt>
<dd><p>The result of a Difference-in-Differences estimation.</p>
<p>The DiD estimate is the ATT: how much better (or worse) the treated
group did relative to what would have been expected based on the
control group’s trajectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>time</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>outcome</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>)</p></li>
<li><p><strong>naive_diff</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.effect">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">effect</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.DiDResult.effect" title="Link to this definition"></a></dt>
<dd><p>ATT under the parallel trends assumption.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DiD point estimate</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.naive_diff">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">naive_diff</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.DiDResult.naive_diff" title="Link to this definition"></a></dt>
<dd><p>treated mean minus control mean in the post period.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Naive post-period difference</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.std_err">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">std_err</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.DiDResult.std_err" title="Link to this definition"></a></dt>
<dd><p>Standard error of the DiD estimate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.conf_int">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">conf_int</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.DiDResult.conf_int" title="Link to this definition"></a></dt>
<dd><p>95% confidence interval for the DiD estimate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.pvalue">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">pvalue</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></span><a class="headerlink" href="#formative.DiDResult.pvalue" title="Link to this definition"></a></dt>
<dd><p>p-value for the DiD estimate (<code class="docutils literal notranslate"><span class="pre">H0:</span> <span class="pre">ATT</span> <span class="pre">=</span> <span class="pre">0</span></code>).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.statsmodels_result">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">statsmodels_result</span></span><a class="headerlink" href="#formative.DiDResult.statsmodels_result" title="Link to this definition"></a></dt>
<dd><p>The underlying statsmodels OLS result, for full diagnostics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="formative.DiDResult.assumptions">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">assumptions</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="refutations.html#formative.Assumption" title="formative.refutations._check.Assumption"><span class="pre">Assumption</span></a><span class="p"><span class="pre">]</span></span></span><a class="headerlink" href="#formative.DiDResult.assumptions" title="Link to this definition"></a></dt>
<dd><p>Modelling assumptions required for a causal interpretation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.DiDResult.executive_summary">
<span class="sig-name descname"><span class="pre">executive_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiDResult.executive_summary" title="Link to this definition"></a></dt>
<dd><p>Narrative explanation of the method, DAG, assumptions, and result.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.DiDResult.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiDResult.summary" title="Link to this definition"></a></dt>
<dd><p>Concise tabular summary of the ATT estimate, confidence interval, and assumptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="formative.DiDResult.refute">
<span class="sig-name descname"><span class="pre">refute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#formative.DiDResult.refute" title="Link to this definition"></a></dt>
<dd><p>Run refutation checks against this DiD estimation.</p>
<p>Currently runs:</p>
<ul class="simple">
<li><p><strong>Placebo group</strong>: randomly permutes group labels and re-runs DiD.
The placebo estimate should be near zero if the result is not spurious.</p></li>
<li><p><strong>Placebo time</strong>: randomly permutes time labels and re-runs DiD.
The placebo estimate should be near zero if the effect is genuinely
concentrated in the post period.</p></li>
<li><p><strong>Random common cause</strong>: adds a random noise column as an extra
control and checks that the estimate does not shift by more than
one standard error.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – The same dataframe passed to <code class="docutils literal notranslate"><span class="pre">fit()</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="estimands.html" class="btn btn-neutral float-left" title="Estimands: ATE, ATT, and LATE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="refutations.html" class="btn btn-neutral float-right" title="Refutations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Max Pagels.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>